---
schema: v0.1
iaas: azure # this can be azure or some other platform

cloud_meta:
  location: eastus

platform:
  type: lamp

vm_groups:
  - name: jumpbox
    count: 1
    cloud_meta:
      sku: Standard_B1ms
    type: vm # this can be vm or vmss
    storage:
      image:
        offer: offer1
        publisher: ubuntu
        sku: sku1
        version: latest
      os_disk:
        size: 10240
      data_disks:
        - size: 102400
    networks:
      - name: network1
        cloud_meta:
          subnet_name: snet-1
    security_groups:
      - name: security_group_1
    roles:
      - name: builtin/jumpbox

  - name: web_servers
    count: 2
    sku: Standard_B1ms
    type: vm # this can be vm or vmss
    os_disk:
      size: 10240
    data_disks:
      - size: 102400
      # name_convension: uuid   
    networks:
      - name: network1
        cloud_meta:
          subnet_name: snet-1
          load_balancer_name: load_balancer_1
    roles: # this is used to generate the deployment scripts
      - name: builtin/lamp_web_role
  
  - name: gluster_fs_servers
    count: 2
    sku: Standard_B1ms
    type: vm # this can be vm or vmss
    os_disk:
      size: 10240
    data_disks:
      - size: 102400
      # name_convension: uuid   
    networks:
      - name: network1
        cloud_meta:
          subnet_name: snet-1
    roles: # this is used to generate the deployment scripts
      - name: builtin/gluster_server_node

  - name: redis_cache_servers
    count: 1
    sku: Standard_B1ms
    type: vm
    os_disk:
      size: 10240
    data_disks:
      - size: 102400
      # name_convension: uuid   
    networks:
      - name: network1
        cloud_meta:
          subnet_name: snet-1
    roles: # this is used to generate the deployment scripts
      - name: builtin/redis_server

networks:
  - name: network1
    type: vnet
    cloud_meta:
      virtual_network_name: vnet1
    subnets:
      - range: 10.10.0.0/24
        gateway: 10.10.0.1
        cloud_meta:
          name: snet-1

load_balancers:
  - name: load_balancer_1
    cloud_meta:
      sku: Standard

databases:
  - migrate_from: # indicate where we should migrate from.
      origin_host: asd
      origin_database: asd
      origin_username: asd
      origin_password: asd
    engine: mysql
    engine_version: "5.7"
    cores: 2
    storage: 5
    backup_retention_days: 35
    username: "kl"
    password: "abcd1234!"
